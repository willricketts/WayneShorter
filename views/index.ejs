<!DOCTYPE html>
<html>
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" rel="stylesheet">
    <link rel='stylesheet' href='/stylesheets/style.css' />
  <title><%= title %></title>

  </head>
  <body>
    <script>
    $( document ).ready(function() {
      $("#success").hide();
      $("#failure").hide();
      $("#emptyField").hide();
      $("#submit").click(function() {
        if($("#field").val() == "") {
          //SUBMITTED EMPTY STRING
          $("#emptyField").show();
        }
        else {
          $.ajax({
            type: "POST",
            url: 'shorten',
            data: {payload: $('#field').val() },
          }).done(function(data) {
            var response = JSON.parse(data);
            if(data == 'Invalid URL') {
              //BAD URL
              $("#failure").show();
            }
            else {
              //GOOD URL
              $("#emptyField").hide();
              $("#createShortlink").hide();
              $("#newLink").text(window.location.host + '/' + response.identifier);
              $("#success").show();
            }
          });
        }
      });
    });
    </script>
    <h1><%= title %></h1>
    <div id="createShortlink">
      <input type="text" placeholder="Linkz" id="field">
      <button class="btn btn-large btn-primary" id="submit">Play that Jazz!</button>
    </div>

    <div id="success">
      <h2 id="newLink"></h1>
    </div>

    <div id="failure">
      <h1>Failure</h1>
    </div>

    <div id="emptyField">
      <h1>Empty FIeld</h1>
    </div>
  </body>
</html>
